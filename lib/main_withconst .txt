import 'package:flutter/material.dart';
import 'auth_Screen.dart'; // Import AuthScreen
import 'home_screen.dart'; // Import HomeScreen

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'Black Prism',
      theme: ThemeData(
        primaryColor: Colors.black,
        scaffoldBackgroundColor: Colors.white,
      ),
      home: const MainScreen(), // Set MainScreen as home
    );
  }
}

class MainScreen extends StatefulWidget {
  const MainScreen({super.key});

  @override
  _MainScreenState createState() => _MainScreenState();
}

class _MainScreenState extends State<MainScreen> {
  int _currentIndex = 0;

  // Add a flag to check if the user is logged in
  bool _isLoggedIn = false; // Set to true if the user is logged in

  final List<Widget> _pages = [
    HomeScreen(), // Home Page
    Placeholder(), // Placeholder for Upload
    Placeholder(), // Placeholder for Search
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: _isLoggedIn
          ? _pages[_currentIndex] // Show pages if logged in
          : const AuthScreen(), // Show AuthScreen if not logged in
      bottomNavigationBar: _isLoggedIn
          ? BottomNavigationBar(
              currentIndex: _currentIndex,
              selectedItemColor: Colors.black,
              unselectedItemColor: Colors.grey,
              onTap: (index) {
                setState(() {
                  _currentIndex = index;
                });
              },
              items: const [
                BottomNavigationBarItem(
                  icon: Icon(Icons.home),
                  label: "Home",
                ),
                BottomNavigationBarItem(
                  icon: Icon(Icons.add),
                  label: "Upload",
                ),
                BottomNavigationBarItem(
                  icon: Icon(Icons.search),
                  label: "Search",
                ),
              ],
            )
          : null, // No BottomNavigationBar if not logged in
    );
  }
}
